<!doctype html><html lang=en-us><head><title>Get Azure VM Cores (vCPUs) per Region | graef.io</title><meta charset=utf-8><meta name=language content="en"><meta name=description content><meta name=keywords content="automation ,powershell ,azure"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=twitter:card content="summary"><meta name=twitter:title content="Get Azure VM Cores (vCPUs) per Region"><meta name=twitter:description content><meta name=twitter:site content="https://twitter.com/segraef"><meta name=twitter:creator content="https://twitter.com/segraef"><link rel="shortcut icon" type=image/png href=/favicon.ico><link type=text/css rel=stylesheet href=/graef.io/css/post.min.b60e0932fe1c50c3d7c5b4f83ee9e4592363654d0f2abf05bbd0678d5b8a214c.css integrity="sha256-tg4JMv4cUMPXxbT4PunkWSNjZU0PKr8Fu9BnjVuKIUw="><link type=text/css rel=stylesheet href=/graef.io/css/custom.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU="><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/segraef.github.io\/graef.io\/"},"articleSection":"blog","name":"Get Azure VM Cores (vCPUs) per Region","headline":"Get Azure VM Cores (vCPUs) per Region","description":"","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"2021","datePublished":"2021-02-21 13:37:18 \u002b0800 \u002b0800","dateModified":"2021-02-21 13:37:18 \u002b0800 \u002b0800","url":"https:\/\/segraef.github.io\/graef.io\/blog\/az-cores-per-region\/","wordCount":"103","keywords":["automation","powershell","azure","Blog"]}</script></head><body><div class=burger__container><div class=burger aria-controls=navigation aria-label=Menu><div class="burger__meat burger__meat--1"></div><div class="burger__meat burger__meat--2"></div><div class="burger__meat burger__meat--3"></div></div></div><nav class=nav id=navigation><ul class=nav__list><li><a href=/graef.io/>about</a></li><li><a href=/graef.io/archive>archive</a></li><li><a class=active href=/graef.io/blog>blog</a></li></ul></nav><main><div class=flex-wrapper><div class=post__container><div class=post><header class=post__header><h1 id=post__title>Get Azure VM Cores (vCPUs) per Region</h1><time datetime="2021-02-21 13:37:18 +0800 +0800" class=post__date>Feb 21 2021</time></header><article class=post__content><p>If you need a script which outputs you the overall VMCore amount per region, there you go.
This is a snippet from a RunBook which iterates also through each subscription before, so you would get all amount of used cores per subscription as well as per region.</p><p>I took the advantage of using Get-AzVMUsage.</p><pre><code class=language-powershell>$AzureLocations = Get-AzLocation | Select-Object DisplayName
$Result = @()
ForEach ($AzureLocation in $AzureLocations) {
    $CoreAmount = Get-AzVMUsage -Location $AzureLocation.DisplayName | Where-Object { $_.Name.Value -eq &quot;virtualMachines&quot; } | Select-Object currentvalue
    $Object = New-Object -Type PSCustomObject -Property @{
        Location = $AzureLocation.Displayname
        VMCores  = $CoreAmount.CurrentValue
    }
    $Object
    $Result += $Object
}
$Result
</code></pre><p><img src=cores.png alt></p></article><ul class=tags__list><li class=tag__item><a class=tag__link href=https://segraef.github.io/graef.io/tags/automation/>automation</a></li><li class=tag__item><a class=tag__link href=https://segraef.github.io/graef.io/tags/powershell/>powershell</a></li><li class=tag__item><a class=tag__link href=https://segraef.github.io/graef.io/tags/azure/>azure</a></li></ul><div class=pagination><a class=pagination__item href=https://segraef.github.io/graef.io/blog/markdown-syntax-guide/><span class=pagination__label>Previous Post</span>
<span class=pagination__title>Markdown Syntax Guide</span></a></div><footer class=post__footer><div class=social-icons><a class=social-icons__link rel=me title=Twitter href=https://twitter.com/segraef target=_blank rel=noopener><div class=social-icons__icon style=background-image:url(https://segraef.github.io/graef.io/svg/twitter.svg)></div></a><a class=social-icons__link rel=me title=GitHub href=https://github.com/segraef target=_blank rel=noopener><div class=social-icons__icon style=background-image:url(https://segraef.github.io/graef.io/svg/github.svg)></div></a><a class=social-icons__link rel=me title=LinkedIn href=https://linkedin.com/in/sgraef target=_blank rel=noopener><div class=social-icons__icon style=background-image:url(https://segraef.github.io/graef.io/svg/linkedin.svg)></div></a><a class=social-icons__link rel=me title=Email href=mailto:sebastian@graef.io target=_blank rel=noopener><div class=social-icons__icon style=background-image:url(https://segraef.github.io/graef.io/svg/email.svg)></div></a></div><p>Â© 2021</p></footer></div></div></div></main><script src=/graef.io/js/index.min.49e4d8a384357d9b445b87371863419937ede9fa77737522ffb633073aebfa44.js integrity="sha256-SeTYo4Q1fZtEW4c3GGNBmTft6fp3c3Ui/7YzBzrr+kQ=" crossorigin=anonymous></script><script src=https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js></script><script src=https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js data-autoloader-path=https://unpkg.com/prismjs@1.20.0/components/></script></body></html>